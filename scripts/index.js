var data = `{
    "s1": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s2": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s3": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s4": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s5": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s6": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s7": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s8": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s9": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s10": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s11": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    },
    "s12": {
      "q1": 0,
      "q2": 0,
      "q3": 0
    }
  }`;
const tsvData = `
Hello there sir, how could I help you today?\tHello there sir, how could I help you today??\tHello there sir, how could I help you today???
Hello there sir, how could I help you today????\tHello there sir, how could I help you today?????\tHello there sir, how could I help you today??????
Hello there sir, how could I help you today???????\tHello there sir, how could I help you today????????\tHello there sir, how could I help you today?????????
Hello there sir, how could I help you today??????????\tHello there sir, how could I help you today???????????\tHello there sir, how could I help you today???????????
Hello there sir, how could I help you today????????????\tHello there sir, how could I help you today?????????????\tHello there sir, how could I help you today?????????????
Hello there sir, how could I help you today??????????????\tHello there sir, how could I help you today???????????????\tHello there sir, how could I help you today???????????????
Hello there sir, how could I help you today????????????????\tHello there sir, how could I help you today?????????????????\tHello there sir, how could I help you today?????????????????
Hello there sir, how could I help you today??????????????????\tHello there sir, how could I help you today???????????????????\tHello there sir, how could I help you today???????????????????
Hello there sir, how could I help you today????????????????????\tHello there sir, how could I help you today?????????????????????\tHello there sir, how could I help you today?????????????????????
Hello there sir, how could I help you today??????????????????????\tHello there sir, how could I help you today???????????????????????\tHello there sir, how could I help you today???????????????????????
Hello there sir, how could I help you today????????????????????????\tHello there sir, how could I help you today?????????????????????????\tHello there sir, how could I help you today?????????????????????????
Hello there sir, how could I help you today??????????????????????????\tHello there sir, how could I help you today???????????????????????????\tHello there sir, how could I help you today???????????????????????????
`;
var stageTitles = ["Faza 1", "Faza 2", "Faza 3", "Faza 4", "Faza 5", "Faza 6", "Faza 7", "Faza 8", "Faza 9", "Faza 10", "Faza 11", "Faza 12"];
var parced = JSON.parse(data);
localStorage.setItem('data', data);
var obj = JSON.parse(data);
var scores = obj;
var current = 1;
var nextBtn = document.getElementById("next");
var prevBtn = document.getElementById("return");
var title = document.getElementById("title");
var progress = document.getElementById("progressBar");
var q1 = document.getElementById("q1");
var q2 = document.getElementById("q2");
var q3 = document.getElementById("q3");

function changeTitle(num) {
  if (window.location.href.includes("quiz.html")) {
    document.title = `Faza ${num} | Test Wypalenia`;
    title.innerHTML = `Faza ${num} - ${stageTitles[num - 1]}`;
    progress.value = num;
  }
}
changeTitle(current);
function next() {
    if (current < 12) {
        current++;
        changeTitle(current);
        setQuestion(current);
    } else {
        window.location.href = "done.html";
    }
}
function back() {
    if (current > 1) {
        current--;
        changeTitle(current);
        setQuestion(current);
    } else {
        window.location.href = "index.html";
    }
}

if (nextBtn && prevBtn) {
  nextBtn.addEventListener("click", next);
  prevBtn.addEventListener("click", back);
}

function addData(score, s, q) {
  obj[s][q] = score;
}
for (let i = 1; i < 13; i++) {
  var sel = `s${i}`;
  var score = obj[sel]['q1'] + obj[sel]['q2'] + obj[sel]['q3'];
  if (score && sel) {
    document.querySelector(`#${sel}`).innerHTML = `${score}/3`;
  }
}
function tsvParse() {
  const rows = tsvData.trim().split('\n');
  const listOfLists = [];

  for (let i = 0; i < rows.length; i++) {
    const values = rows[i].split('\t'); // Assuming tabs separate the values
    listOfLists.push(values);
  }

  return listOfLists;
}
function setQuestion(section) {
  section = section - 1;
  q1.innerHTML = tsvParse()[section][0];
  q2.innerHTML = tsvParse()[section][1];
  q3.innerHTML = tsvParse()[section][2];
}
setQuestion(current);